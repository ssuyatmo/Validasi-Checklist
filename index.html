<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checklist QA1 & QA7</title>
<style>
body {
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(180deg,#f8fff4,#e8f5e9);
  margin:0; padding:0;
}
header {
  background: linear-gradient(90deg,#d4af37,#c2a05f);
  color:#fff; text-align:center;
  padding:15px; font-size:20px; font-weight:bold;
  border-bottom-left-radius:20px; border-bottom-right-radius:20px;
  box-shadow:0 4px 10px rgba(0,0,0,0.2);
}
.container {
  max-width:850px; margin:20px auto; background:#fff;
  border-radius:16px; box-shadow:0 4px 10px rgba(0,0,0,0.1); padding:20px;
}
.section {margin-bottom:20px;}
.section h3 {
  background:#4caf50; color:white; padding:8px;
  border-radius:10px; font-size:16px;
}
.item {display:flex; align-items:center; justify-content:space-between; margin:8px 0;}
.item label {flex:1; font-size:15px;}
.toggle {display:flex; gap:5px;}
.toggle button {
  width:50px; height:35px; border:none; border-radius:8px;
  font-size:15px; cursor:pointer; color:#fff;
}
.good {background:#66bb6a;}
.bad {background:#ef5350;}
.check {background:#4caf50;}
.cross {background:#ef5350;}
textarea {
  width:100%; border-radius:8px; border:1px solid #ccc;
  padding:6px; margin-top:5px; font-size:14px;
}
.buttons {display:flex; justify-content:space-around; margin-top:20px;}
.buttons button {
  border:none; border-radius:10px; padding:10px 15px;
  cursor:pointer; font-size:16px; color:#fff;
}
.preview {background:#66bb6a;}
.copy {background:#fbc02d;}
.send {background:#42a5f5;}
.preview-area {
  background:#f0f4c3; padding:10px; border-radius:10px;
  margin-top:20px; white-space:pre-wrap;
}
.pressure input {
  width:60px; margin-right:5px; text-align:center;
}
</style>
</head>
<body>

<header>🧾 QA1 & QA7 Inspection Checklist</header>

<div class="container">
  <div class="section">
    <label>📅 Tanggal: <input type="date" id="tanggal"></label><br>
    <label>👷 Mekanik: <input type="text" id="mekanik"></label><br>
    <label>🚗 CN: <input type="text" id="cn"></label><br>
    <label>⌛ HM: <input type="text" id="hm"></label>
  </div>

  <div class="section" id="oil-level"><h3>🩸 Oil Level 🩸</h3></div>
  <div class="section" id="engine-area"><h3>⚙️ Engine Area ⚙️</h3></div>
  <div class="section" id="cabin-area"><h3>🚗 Cabin Area 🚗</h3></div>
  <div class="section" id="frame-area"><h3>🛞 Frame Area 🛞</h3></div>

  <div class="section pressure">
    <h3>💧 Pressure Suspension (Panel) 💧</h3>
    FL: <input type="text" id="fl">
    FR: <input type="text" id="fr">
    RL: <input type="text" id="rl">
    RR: <input type="text" id="rr">
  </div>

  <div class="section" id="tyre"><h3>🛠️ Tyre Condition 🛠️</h3></div>

  <div class="section" id="validasi"><h3>📝 Validasi & Kelengkapan Checklist Service</h3></div>

  <div class="section">
    <h3>⚠️ Deviation (Tambahan Manual)</h3>
    <textarea id="manualDeviation" rows="4" placeholder="Tambahkan deviasi manual di sini..."></textarea>
  </div>

  <div class="buttons">
    <button class="preview" onclick="previewResult()">🧾 Preview</button>
    <button class="copy" onclick="copyResult()">📋 Copy</button>
    <button class="send" onclick="sendWA()">📤 Send WA</button>
  </div>

  <div id="preview" class="preview-area"></div>
</div>

<script>
const oilItems=["Engine oil level","Transmission oil level","Hydraulic oil level"];
const engineItems=["Belt tension","Engine oil leakage","Common Rail Connector","Injector Tube"];
const cabinItems=["FM Radio","Fatigue Warning","Power Window"];
const frameItems=["Operator seat","Hand Rail"];
const tyreItems=["Tyre"];
const validasiItems=[
  "Job Card & Cover Checklist","Form Observasi Redo PS","Form QA 1 & QA 7","Form PPM",
  "Form Check List A","Form Check List B","Form Check List C","Form Backlog",
  "Form FUI","Form Repair Order","Form Combine Maintenance","Form Service Activity Report"
];

function createSection(id, items, withTemuan=true, validasi=false){
  const section=document.getElementById(id);
  items.forEach(item=>{
    const div=document.createElement("div");
    div.className="item";
    div.innerHTML=`
      <label>${item}</label>
      <div class="toggle">
        ${validasi
          ? `<button class="check" onclick="setStatus(this,'✅')">✅</button>
             <button class="cross" onclick="setStatus(this,'❌')">❌</button>`
          : `<button class="good" onclick="setStatus(this,'GOOD')">✅</button>
             <button class="bad" onclick="setStatus(this,'BAD')">❌</button>`
        }
      </div>
    `;
    section.appendChild(div);
    if(withTemuan && !validasi){
      const textarea=document.createElement("textarea");
      textarea.placeholder=`Tuliskan temuan untuk ${item} (jika ada)...`;
      section.appendChild(textarea);
    }
  });
}

createSection("oil-level",oilItems);
createSection("engine-area",engineItems);
createSection("cabin-area",cabinItems);
createSection("frame-area",frameItems);
createSection("tyre",tyreItems);
createSection("validasi",validasiItems,false,true);

function setStatus(btn,status){
  const parent=btn.closest(".item");
  parent.setAttribute("data-status",status);
}

function previewResult(){
  const tgl=document.getElementById("tanggal").value;
  const mekanik=document.getElementById("mekanik").value;
  const cn=document.getElementById("cn").value;
  const hm=document.getElementById("hm").value;
  const fl=document.getElementById("fl").value;
  const fr=document.getElementById("fr").value;
  const rl=document.getElementById("rl").value;
  const rr=document.getElementById("rr").value;
  const manual=document.getElementById("manualDeviation").value.trim();

  let deviation="";
  let result=`📅 Tgl : ${tgl}\n👷 Mekanik : ${mekanik}\n🚗 CN : ${cn}\n⌛ HM : ${hm}\n\n---\n`;

  function buildSection(title,id,withTemuan=true,validasi=false){
    result+=`${title}\n`;
    const section=document.getElementById(id);
    const textareas=section.querySelectorAll("textarea");
    let i=0;
    section.querySelectorAll(".item").forEach(item=>{
      const label=item.querySelector("label").innerText;
      const status=item.getAttribute("data-status")|| (validasi?"❌":"GOOD");
      const temuan=withTemuan && !validasi ? textareas[i++].value.trim() : "";
      result+=`${label} : ${status}\n`;
      if(temuan) deviation+=`⚠️ ${temuan}\n`;
    });
    result+=`\n---\n`;
  }

  buildSection("🩸 Oil Level 🩸","oil-level");
  buildSection("⚙️ Engine Area ⚙️","engine-area");
  buildSection("🚗 Cabin Area 🚗","cabin-area");
  buildSection("🛞 Frame Area 🛞","frame-area");

  result+=`💧 Pressure Suspension (Panel) 💧\nFL : ${fl} | FR : ${fr} | RL : ${rl} | RR : ${rr}\n\n---\n`;

  buildSection("🛠️ Tyre Condition 🛠️","tyre");
  buildSection("📝 Validasi & Kelengkapan Checklist Service","validasi",false,true);

  if(manual){
    manual.split("\n").forEach(line=>{
      if(line.trim()!=="") deviation+=`⚠️ ${line.trim()}\n`;
    });
  }

  if(deviation){
    result+=`⚠️ Deviation :\n${deviation}`;
  }

  document.getElementById("preview").innerText=result;
}

function copyResult(){
  navigator.clipboard.writeText(document.getElementById("preview").innerText);
  alert("✅ Hasil disalin ke clipboard!");
}

function sendWA(){
  const text=encodeURIComponent(document.getElementById("preview").innerText);
  window.open(`https://wa.me/?text=${text}`,'_blank');
}
</script>
</body>
</html>
