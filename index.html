<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Inspection Report HD</title>
<style>
  body {
    font-family: "Segoe UI", Arial, sans-serif;
    margin: 0;
    background: linear-gradient(to bottom, #f9fff9, #e9ffe9);
    color: #222;
  }

  header {
    background: linear-gradient(90deg, #f8e8a0, #fff5c3);
    text-align: center;
    color: #2e3a20;
    padding: 12px;
    font-size: 20px;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    box-shadow: 0 3px 6px rgba(0,0,0,0.1);
  }

  header img {
    width: 40px;
    height: 40px;
  }

  .container {
    padding: 15px;
    max-width: 550px;
    margin: auto;
  }

  .card {
    background: white;
    border-radius: 15px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    padding: 15px;
    margin-bottom: 15px;
  }

  .card h3 {
    margin-top: 0;
    font-size: 16px;
    color: #036d2e;
    border-bottom: 1px solid #ccc;
    padding-bottom: 5px;
  }

  label {
    display: block;
    margin: 6px 0 3px;
  }

  input[type="text"], input[type="number"], input[type="date"], textarea {
    width: 100%;
    padding: 8px;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 14px;
  }

  .row {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 6px;
  }

  .status-box {
    flex: 0 0 80px;
    text-align: center;
    padding: 8px;
    border-radius: 8px;
    background: #e8f5e9;
    font-weight: bold;
    cursor: pointer;
    user-select: none;
    border: 1px solid #b5d6b5;
    transition: 0.2s;
  }

  .status-bad {
    background: #ffebee;
    color: #c62828;
    border: 1px solid #f5a1a1;
  }

  .actions {
    display: flex;
    justify-content: space-between;
    margin-top: 15px;
    gap: 8px;
  }

  .actions button {
    flex: 1;
    border: none;
    border-radius: 8px;
    padding: 10px;
    font-size: 14px;
    font-weight: bold;
    cursor: pointer;
    transition: 0.2s;
  }

  .preview-btn { background: #f0b429; color: white; }
  .copy-btn { background: #4caf50; color: white; }
  .send-btn { background: #25D366; color: white; }

  .preview-btn:hover { background: #e1a61f; }
  .copy-btn:hover { background: #43a047; }
  .send-btn:hover { background: #1ebe5c; }

  #previewBox {
    display: none;
    background: white;
    border-radius: 10px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.15);
    padding: 10px;
    margin-top: 12px;
    font-family: monospace;
    white-space: pre-wrap;
    font-size: 14px;
  }

  .toggle-btn {
    cursor: pointer;
    background: #e8f5e9;
    border-radius: 8px;
    text-align: center;
    padding: 5px;
  }

  .valid-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 6px;
  }

  .valid-btn {
    border: none;
    border-radius: 5px;
    padding: 5px 10px;
    cursor: pointer;
  }

  .valid-good {
    background: #c8f7c5;
    color: #2e7d32;
  }

  .valid-bad {
    background: #ffd6d6;
    color: #b71c1c;
  }
</style>
</head>
<body>

<header>
  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8c/Dump_truck_icon.png/480px-Dump_truck_icon.png" alt="logo">
  INSPECTION REPORT HD
</header>

<div class="container">
  <div class="card">
    <h3>Informasi Unit</h3>
    <label>Tanggal: <input type="date" id="date"></label>
    <label>CN: <input type="text" id="cn" placeholder="Code Number"></label>
    <label>HM: <input type="number" id="hm" placeholder="Hourmeter"></label>
  </div>

  <div class="card">
    <h3>Oil Level</h3>
    <div class="row">
      <div class="status-box" onclick="toggleStatus(this, 'engineOil')">GOOD</div>
      <input id="engineOil" type="text" value="Engine oil level: GOOD">
    </div>
    <div class="row">
      <div class="status-box" onclick="toggleStatus(this, 'transOil')">GOOD</div>
      <input id="transOil" type="text" value="Transmission oil level: GOOD">
    </div>
    <div class="row">
      <div class="status-box" onclick="toggleStatus(this, 'hydOil')">GOOD</div>
      <input id="hydOil" type="text" value="Hydraulic oil level: GOOD">
    </div>
  </div>

  <div class="card">
    <h3>Pressure Suspension (Panel)</h3>
    <div class="row">
      <input type="text" id="fl" placeholder="FL">
      <input type="text" id="fr" placeholder="FR">
      <input type="text" id="rl" placeholder="RL">
      <input type="text" id="rr" placeholder="RR">
    </div>
  </div>

  <div class="card">
    <h3>Tyre Condition</h3>
    <div class="row">
      <div class="status-box" onclick="toggleStatus(this, 'tyre')">GOOD</div>
      <input id="tyre" type="text" value="Tyre condition: GOOD">
    </div>
  </div>

  <div class="card">
    <h3>Validasi & Kelengkapan Checklist</h3>
    <div id="validasiList"></div>
  </div>

  <div class="card">
    <h3>Deviation</h3>
    <textarea id="deviation" placeholder="‚ö†Ô∏è Ketik deviation per baris..."></textarea>
  </div>

  <div class="actions">
    <button class="preview-btn" onclick="showPreview()">üßæ Preview</button>
    <button class="copy-btn" onclick="copyText()">üìã Copy</button>
    <button class="send-btn" onclick="sendWA()">üì§ Send</button>
  </div>

  <div id="previewBox"></div>
</div>

<script>
  const validasiItems = [
    "Job Card & Cover Checklist",
    "Form Observasi Redo PS",
    "Form QA 1 & QA 7",
    "Form PPM",
    "Form Check List A",
    "Form Check List B",
    "Form Check List C",
    "Form Backlog",
    "Form FUI",
    "Form Repair Order",
    "Form Combine Maintenance",
    "Form Service Activity Report"
  ];

  const validasiDiv = document.getElementById('validasiList');
  validasiItems.forEach(item => {
    const div = document.createElement('div');
    div.className = 'valid-item';
    div.innerHTML = `<span>${item}</span>
    <button class="valid-btn valid-good" onclick="toggleValidasi(this)">‚úÖ</button>`;
    validasiDiv.appendChild(div);
  });

  function toggleStatus(el, fieldId) {
    const input = document.getElementById(fieldId);
    if (el.textContent === "GOOD") {
      el.textContent = "BAD";
      el.classList.add("status-bad");
      input.value = input.value.replace("GOOD", "BAD");
    } else {
      el.textContent = "GOOD";
      el.classList.remove("status-bad");
      input.value = input.value.replace("BAD", "GOOD");
    }
  }

  function toggleValidasi(btn) {
    if (btn.textContent === "‚úÖ") {
      btn.textContent = "‚ùå";
      btn.classList.remove("valid-good");
      btn.classList.add("valid-bad");
    } else {
      btn.textContent = "‚úÖ";
      btn.classList.add("valid-good");
      btn.classList.remove("valid-bad");
    }
  }

  function formatDeviation() {
    const lines = document.getElementById("deviation").value.split("\n");
    return lines.filter(l => l.trim() !== "").map(l => l.startsWith("‚ö†Ô∏è") ? l : "‚ö†Ô∏è " + l).join("\n");
  }

  function generateText() {
    const date = document.getElementById("date").value;
    const cn = document.getElementById("cn").value;
    const hm = document.getElementById("hm").value;
    const deviation = formatDeviation();

    const validasiStatus = Array.from(document.querySelectorAll("#validasiList .valid-item"))
      .map(v => {
        const name = v.querySelector("span").textContent;
        const icon = v.querySelector("button").textContent;
        return `- ${name} ${icon}`;
      }).join("\n");

    return `*QA-1 Pre Inspection*\n\nüìÖ Tgl: ${date}\nüöó CN: ${cn}\n‚åõ HM: ${hm}\n
ü©∏ *Oil Level* ü©∏
${document.getElementById("engineOil").value}
${document.getElementById("transOil").value}
${document.getElementById("hydOil").value}

üíß *Pressure Suspension (Panel)* üíß
FL: ${fl.value} | FR: ${fr.value} | RL: ${rl.value} | RR: ${rr.value}

üõû *Tyre Condition:* ${tyre.value}

üìù *Validasi & Kelengkapan Checklist Service:*
${validasiStatus}

*Deviation:*
${deviation}`;
  }

  function showPreview() {
    const preview = document.getElementById("previewBox");
    preview.textContent = generateText();
    preview.style.display = "block";
  }

  function copyText() {
    navigator.clipboard.writeText(generateText());
    alert("‚úÖ Teks berhasil disalin!");
  }

  function sendWA() {
    const text = encodeURIComponent(generateText());
    window.open(`https://wa.me/?text=${text}`, '_blank');
  }
</script>

</body>
</html>
