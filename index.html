<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QA-1 / QA-7 Pre-Inspection</title>
<style>
  body {
    font-family: "Segoe UI", sans-serif;
    margin: 0;
    padding: 0;
    background: linear-gradient(to bottom, #eae4c9, #d6f5d6);
  }
  .header {
    background: linear-gradient(90deg, #d4af37, #7ec67f);
    color: white;
    text-align: center;
    padding: 10px;
    border-radius: 0 0 15px 15px;
    font-weight: bold;
    letter-spacing: 1px;
    box-shadow: 0 3px 5px rgba(0,0,0,0.2);
  }
  .container {
    max-width: 480px;
    margin: 15px auto;
    background: white;
    padding: 12px;
    border-radius: 15px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
  }
  .section {
    margin-top: 10px;
    border: 1px solid #ddd;
    padding: 10px;
    border-radius: 10px;
  }
  .section h3 {
    margin-top: 0;
    background: #7ec67f;
    color: white;
    text-align: center;
    border-radius: 6px;
    padding: 5px 0;
    font-size: 15px;
  }
  .item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 4px 0;
  }
  .buttons button {
    border: none;
    border-radius: 6px;
    padding: 4px 8px;
    font-size: 13px;
    cursor: pointer;
    margin-left: 2px;
  }
  .good, .bad { background: #e5e5e5; color: #333; }
  .good.active { background: #7ec67f; color: white; }
  .bad.active { background: #ff6b6b; color: white; }
  textarea {
    width: 100%;
    height: 40px;
    margin-top: 5px;
    border-radius: 6px;
    border: 1px solid #ccc;
    padding: 4px;
    font-size: 13px;
    resize: vertical;
  }
  .btn-row {
    display: flex;
    justify-content: space-around;
    margin-top: 12px;
  }
  .btn-row button {
    border: none;
    padding: 8px 10px;
    border-radius: 8px;
    font-size: 14px;
    cursor: pointer;
    box-shadow: 0 3px 5px rgba(0,0,0,0.2);
  }
  .preview-btn { background: #4caf50; color: white; }
  .copy-btn { background: #2196f3; color: white; }
  .wa-btn { background: #25d366; color: white; }
  #preview {
    white-space: pre-wrap;
    background: #fafafa;
    border-radius: 10px;
    padding: 10px;
    margin-top: 12px;
    border: 1px solid #ddd;
  }
  .small-input {
    width: calc(100% - 10px);
    margin-top: 4px;
    border-radius: 6px;
    padding: 5px;
    border: 1px solid #ccc;
  }
  select {
    width: 100%;
    padding: 5px;
    border-radius: 6px;
    border: 1px solid #ccc;
  }
</style>
</head>
<body>

<div class="header">üß∞ QA-1 / QA-7 PRE-INSPECTION</div>
<div class="container">

  <label>Pilih Form:</label>
  <select id="formType">
    <option value="QA1">QA-1 Pre-Inspection</option>
    <option value="QA7">QA-7 Pre-Inspection</option>
  </select>

  <div class="section">
    <input class="small-input" id="tgl" placeholder="üìÖ Tgl (ex: 07-Oct-2025)">
    <input class="small-input" id="mekanik" placeholder="üë∑ Mekanik">
    <input class="small-input" id="cn" placeholder="üöó CN Unit">
    <input class="small-input" id="hm" placeholder="‚åõ HM">
  </div>

  <div id="sections"></div>

  <div class="btn-row">
    <button class="preview-btn" onclick="preview()">üßæ Preview</button>
    <button class="copy-btn" onclick="copyText()">üìã Copy</button>
    <button class="wa-btn" onclick="sendWA()">üì§ WA</button>
  </div>

  <div id="preview"></div>
</div>

<script>
const sectionsData = {
  "Oil Level": ["Engine Oil Level", "Transmission Oil Level", "Hydraulic Oil Level"],
  "Engine Area": ["Belt Tension", "Engine Oil Leakage", "Common Rail Connector", "Injector Tube"],
  "Cabin Area": ["FM Radio", "Fatigue Warning", "Power Window"],
  "Frame Area": ["Operator Seat", "Hand Rail"],
  "Tyre Condition": ["Tyre Condition"]
};

const validasiData = [
  "Job Card & Cover Checklist","Form Observasi Redo PS","Form QA 1 & QA 7","Form PPM",
  "Form Check List A","Form Check List B","Form Check List C","Form Backlog",
  "Form FUI","Form Repair Order","Form Combine Maintenance","Form Service Activity Report"
];

function renderSections() {
  const container = document.getElementById("sections");
  container.innerHTML = "";
  for (const [title, items] of Object.entries(sectionsData)) {
    const div = document.createElement("div");
    div.className = "section";
    div.innerHTML = `<h3>${title}</h3>`;
    items.forEach(item => {
      div.innerHTML += `
        <div class="item">${item}
          <div class="buttons">
            <button class="good">‚úÖ</button><button class="bad">‚ùå</button>
          </div>
        </div>
        <textarea placeholder="Tuliskan temuan jika ada..."></textarea>
      `;
    });
    container.appendChild(div);
  }

  const pressure = document.createElement("div");
  pressure.className = "section";
  pressure.innerHTML = `
    <h3>üíß Pressure Suspension (Panel)</h3>
    <input class="small-input" id="fl" placeholder="FL">
    <input class="small-input" id="fr" placeholder="FR">
    <input class="small-input" id="rl" placeholder="RL">
    <input class="small-input" id="rr" placeholder="RR">
  `;
  container.appendChild(pressure);

  const valid = document.createElement("div");
  valid.className = "section";
  valid.id = "validasi";
  valid.innerHTML = `
    <h3>üìù Validasi & Kelengkapan Checklist Service</h3>
    ${validasiData.map(v=>`
      <div class="item">${v}<div class="buttons"><button class="good">‚úÖ</button><button class="bad">‚ùå</button></div></div>
    `).join("")}
  `;
  container.appendChild(valid);

  const dev = document.createElement("div");
  dev.className = "section";
  dev.innerHTML = `<h3>‚ö†Ô∏è Deviation</h3><div id="deviation"></div>`;
  container.appendChild(dev);

  activateButtons();
}

function activateButtons(){
  document.querySelectorAll('.buttons button').forEach(btn=>{
    btn.onclick = ()=>{
      const sibs = btn.parentElement.querySelectorAll('button');
      sibs.forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
    };
  });
}

document.getElementById("formType").addEventListener("change",()=>{
  const title = document.querySelector("#validasi h3");
  if(document.getElementById("formType").value==="QA7") 
    title.textContent = "üìù Kelengkapan Pengisian Checklist Service";
  else 
    title.textContent = "üìù Validasi & Kelengkapan Checklist Service";
});

function collectDeviation(){
  const devs=[];
  document.querySelectorAll("textarea").forEach(t=>{
    if(t.value.trim()!=="") devs.push("‚ö†Ô∏è "+t.value.trim());
  });
  return devs.join("\n");
}

function preview(){
  const tgl=document.getElementById("tgl").value;
  const mekanik=document.getElementById("mekanik").value;
  const cn=document.getElementById("cn").value;
  const hm=document.getElementById("hm").value;
  const fl=document.getElementById("fl").value;
  const fr=document.getElementById("fr").value;
  const rl=document.getElementById("rl").value;
  const rr=document.getElementById("rr").value;
  const formType=document.getElementById("formType").value;
  const deviation=collectDeviation();

  let text=`üìÖ Tgl : ${tgl}\nüë∑ Mekanik : ${mekanik}\nüöó CN : ${cn}\n‚åõ HM : ${hm}\n\n---\n`;

  for(const [title, items] of Object.entries(sectionsData)){
    text+=`ü©∏ ${title} ü©∏\n`;
    items.forEach((item,i)=>{
      const buttons=document.querySelectorAll(".section")[Object.keys(sectionsData).indexOf(title)].querySelectorAll(".buttons");
      const state=buttons[i].querySelector(".good.active")?"‚úÖ GOOD":buttons[i].querySelector(".bad.active")?"‚ùå BAD":"-";
      text+=`${item} : ${state}\n`;
    });
    text+="\n---\n";
  }

  text+=`üíß Pressure Suspension üíß\nFL : ${fl} | FR : ${fr} | RL : ${rl} | RR : ${rr}\n\n---\n`;

  text+=`${formType==="QA1"?"üìù Validasi & Kelengkapan Checklist Service":"üìù Kelengkapan Pengisian Checklist Service"}\n`;
  validasiData.forEach((v,i)=>{
    const valSec=document.getElementById("validasi").querySelectorAll(".buttons");
    const state=valSec[i].querySelector(".good.active")?"‚úÖ":"‚ùå";
    text+=`${v} ${state}\n`;
  });

  text+=`\n---\n‚ö†Ô∏è Deviation:\n${deviation||"Tidak ada temuan"}`;

  document.getElementById("preview").textContent=text;
}

function copyText(){
  navigator.clipboard.writeText(document.getElementById("preview").textContent);
  alert("‚úÖ Hasil sudah disalin ke clipboard!");
}

function sendWA(){
  const text=encodeURIComponent(document.getElementById("preview").textContent);
  window.open(`https://wa.me/?text=${text}`,"_blank");
}

renderSections();
</script>
</body>
</html>
