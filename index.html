<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QA Inspection Form</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: linear-gradient(180deg, #f4f6f8, #dbe5ec);
      padding: 20px;
    }
    h2 {
      text-align: center;
      color: #1a3d6d;
      text-shadow: 1px 1px 2px #aaa;
    }
    .form-card {
      background: #fff;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      margin: auto;
      max-width: 500px;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
      color: #333;
    }
    input, textarea, select {
      width: 100%;
      margin-top: 5px;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    .checkbox-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 5px;
    }
    .btn {
      display: inline-block;
      margin-top: 15px;
      padding: 10px 15px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      color: #fff;
      font-weight: bold;
    }
    .btn-wa { background: #25D366; }
    .btn-copy { background: #0078FF; margin-left: 10px; }
  </style>
</head>
<body>

  <h2>🌟 QA-1 Pre Inspection 🌟</h2>
  <div class="form-card">
    <label>Tanggal</label>
    <input id="tgl" type="date">

    <label>Mekanik</label>
    <input id="mekanik" placeholder="Contoh: Mario, Jovan">

    <label>CN</label>
    <input id="cn">

    <label>HM</label>
    <input id="hm">

    <label>Oil Level</label>
    <div class="checkbox-group">
      <label><input type="checkbox" id="oil1"> Engine ✅</label>
      <label><input type="checkbox" id="oil2"> Trans ✅</label>
      <label><input type="checkbox" id="oil3"> Hyd ✅</label>
    </div>

    <label>Pressure Suspension (Panel)</label>
    <div class="checkbox-group">
      <input id="fl" placeholder="FL">
      <input id="fr" placeholder="FR">
      <input id="rl" placeholder="RL">
      <input id="rr" placeholder="RR">
    </div>

    <label>Tyre Condition</label>
    <select id="tyre">
      <option value="Good">✅ Good</option>
      <option value="Bad">❌ Bad</option>
    </select>
    <textarea id="tyreDetail" placeholder="Isi jika kondisi Bad..."></textarea>

    <label>Deviation</label>
    <textarea id="deviation" placeholder="Ketik setiap temuan lalu tekan Enter..."></textarea>

    <button class="btn btn-wa" onclick="sendToWA()">📲 Kirim ke WA</button>
    <button class="btn btn-copy" onclick="copyText()">📋 Salin</button>
  </div>

<script>
function formatDeviation(text) {
  // Pisahkan baris & tambahkan ⚠️ di depan setiap temuan
  const lines = text.split('\n').filter(l => l.trim() !== '');
  if (lines.length === 0) return '';
  return 'Deviation :\n' + lines.map(l => `⚠️ ${l.trim()}`).join('\n');
}

function generateText() {
  const tgl = document.getElementById("tgl").value;
  const mekanik = document.getElementById("mekanik").value;
  const cn = document.getElementById("cn").value;
  const hm = document.getElementById("hm").value;
  const tyre = document.getElementById("tyre").value;
  const tyreDetail = document.getElementById("tyreDetail").value;
  const deviation = formatDeviation(document.getElementById("deviation").value);

  return `*QA-1 Pre Inspection*

📅 Tgl : ${tgl}
👷 Mekanik : ${mekanik}

🚗 CN : ${cn}
⌛ HM : ${hm}

💧 *Pressure Suspension (Panel)* 💧
FL : ${document.getElementById("fl").value} MPa
FR : ${document.getElementById("fr").value} MPa
RL : ${document.getElementById("rl").value} MPa
RR : ${document.getElementById("rr").value} MPa

🛞 *Tyre Condition* :
Tyre : ${tyre}
${tyreDetail ? "➡️ " + tyreDetail : ""}

${deviation}`;
}

function sendToWA() {
  const text = encodeURIComponent(generateText());
  window.open(`https://wa.me/?text=${text}`, "_blank");
}

function copyText() {
  navigator.clipboard.writeText(generateText());
  alert("✅ Teks berhasil disalin ke clipboard!");
}
</script>

</body>
</html>
