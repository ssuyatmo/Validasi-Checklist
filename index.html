<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QA1 & QA7 Inspection Form</title>
<style>
body {
  font-family: "Segoe UI", sans-serif;
  background: linear-gradient(180deg, #e9fbe9, #d0f0c0);
  margin: 0;
  padding: 12px;
}
header {
  background: linear-gradient(to right, #f7e597, #f5d76e);
  text-align: center;
  color: #333;
  font-weight: bold;
  padding: 12px;
  border-radius: 14px;
  font-size: 18px;
  box-shadow: 0 3px 8px rgba(0,0,0,0.25);
}
select, input, textarea {
  width: 100%;
  border-radius: 8px;
  border: 1px solid #ccc;
  padding: 6px;
  box-sizing: border-box;
  font-size: 15px;
}
.container { margin-top: 12px; }
.card {
  background: #fff;
  border-radius: 14px;
  padding: 12px;
  margin-bottom: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}
.section-title {
  font-weight: bold;
  color: #2c662d;
  margin-bottom: 8px;
  font-size: 16px;
}
.input-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin: 6px 0;
}
.status {
  width: 50px;
  height: 36px;
  text-align: center;
  border-radius: 10px;
  font-weight: bold;
  cursor: pointer;
  border: 1px solid #ccc;
  box-shadow: inset 0 2px 3px rgba(0,0,0,0.2);
  display: flex;
  align-items: center;
  justify-content: center;
}
.checked {
  background-color: #d9ffd9;
  color: #097f09;
}
.unchecked {
  background-color: #ffd6d6;
  color: #a00;
}
button {
  border: none;
  border-radius: 10px;
  padding: 10px;
  font-size: 16px;
  margin: 5px;
  cursor: pointer;
  box-shadow: 0 3px 8px rgba(0,0,0,0.2);
  color: white;
}
.btn-preview { background: #4CAF50; }
.btn-copy { background: #2196F3; }
.btn-wa { background: #25D366; }
#preview {
  white-space: pre-wrap;
  background: #f8fff8;
  border-radius: 12px;
  padding: 12px;
  margin-top: 10px;
  box-shadow: inset 0 0 8px rgba(0,0,0,0.1);
}
</style>
</head>
<body>

<header>ğŸ§¾ QA-1 & QA-7 INSPECTION REPORT ğŸ§¾</header>

<div class="container">

  <div class="card">
    <label>ğŸ“‹ Jenis Inspection</label>
    <select id="inspectionType">
      <option value="QA-1">QA-1 (Pre-Inspection)</option>
      <option value="QA-7">QA-7 (Final Inspection)</option>
    </select><br>
    <label>ğŸ“… Date:</label>
    <input type="date" id="date"><br>
    <label>ğŸ‘· Mechanic:</label>
    <input type="text" id="mechanic"><br>
    <label>ğŸš— CN:</label>
    <input type="text" id="cn"><br>
    <label>âŒ› HM:</label>
    <input type="text" id="hm">
  </div>

  <!-- Oil Level -->
  <div class="card">
    <div class="section-title">ğŸ©¸ Oil Level</div>
    <div class="input-row"><div class="status checked" onclick="toggleGoodBad(this)">âœ…</div><span>Engine oil level</span></div>
    <div class="input-row"><div class="status checked" onclick="toggleGoodBad(this)">âœ…</div><span>Transmission oil level</span></div>
    <div class="input-row"><div class="status checked" onclick="toggleGoodBad(this)">âœ…</div><span>Hydraulic oil level</span></div>
  </div>

  <!-- Engine -->
  <div class="card">
    <div class="section-title">âš™ï¸ Engine Area</div>
    <div class="input-row"><div class="status checked" onclick="toggleGoodBad(this)">âœ…</div><span>Belt tension</span></div>
    <div class="input-row"><div class="status checked" onclick="toggleGoodBad(this)">âœ…</div><span>Engine oil leakage</span></div>
    <div class="input-row"><div class="status checked" onclick="toggleGoodBad(this)">âœ…</div><span>Common Rail Connector</span></div>
    <div class="input-row"><div class="status checked" onclick="toggleGoodBad(this)">âœ…</div><span>Injector Tube</span></div>
  </div>

  <!-- Cabin -->
  <div class="card">
    <div class="section-title">ğŸš— Cabin Area</div>
    <div class="input-row"><div class="status checked" onclick="toggleGoodBad(this)">âœ…</div><span>FM Radio</span></div>
    <div class="input-row"><div class="status checked" onclick="toggleGoodBad(this)">âœ…</div><span>Fatigue Warning</span></div>
    <div class="input-row"><div class="status checked" onclick="toggleGoodBad(this)">âœ…</div><span>Power Window</span></div>
  </div>

  <!-- Frame -->
  <div class="card">
    <div class="section-title">ğŸ› Frame Area</div>
    <div class="input-row"><div class="status checked" onclick="toggleGoodBad(this)">âœ…</div><span>Operator seat</span></div>
    <div class="input-row"><div class="status checked" onclick="toggleGoodBad(this)">âœ…</div><span>Hand Rail</span></div>
  </div>

  <!-- Pressure Suspension -->
  <div class="card">
    <div class="section-title">ğŸ’§ Pressure Suspension (Panel)</div>
    <div class="input-row">
      <input id="fl" placeholder="FL :">
      <input id="fr" placeholder="FR :">
      <input id="rl" placeholder="RL :">
      <input id="rr" placeholder="RR :">
    </div>
  </div>

  <!-- Tyre -->
  <div class="card">
    <div class="section-title">ğŸ› ï¸ Tyre Condition</div>
    <select id="tyre">
      <option value="âœ… GOOD">âœ… GOOD</option>
      <option value="âŒ BAD">âŒ BAD</option>
    </select>
    <textarea id="tyreNote" placeholder="Jika BAD â†’ tulis temuan di bawah ini:"></textarea>
  </div>

  <!-- Validation -->
  <div class="card">
    <div class="section-title">ğŸ“ Validasi & Kelengkapan Checklist Service</div>
    <div id="validationList"></div>
  </div>

  <!-- Deviation -->
  <div class="card">
    <div class="section-title">âš ï¸ Deviation</div>
    <textarea id="deviation" rows="4" placeholder="Tulis deviation satu per baris..."></textarea>
  </div>

  <div style="text-align:center;">
    <button class="btn-preview" onclick="preview()">ğŸ§¾ Preview</button>
    <button class="btn-copy" onclick="copyText()">ğŸ“‹ Copy</button>
    <button class="btn-wa" onclick="sendWA()">ğŸ“¤ WhatsApp</button>
  </div>

  <div id="preview"></div>
</div>

<script>
const validationItems = [
  "Job Card & Cover Checklist",
  "Form Observasi Redo PS",
  "Form QA 1 & QA 7",
  "Form PPM",
  "Form Check List A",
  "Form Check List B",
  "Form Check List C",
  "Form Backlog",
  "Form FUI",
  "Form Repair Order",
  "Form Combine Maintenance",
  "Form Service Activity Report"
];

// generate validation list
const container = document.getElementById("validationList");
validationItems.forEach(item=>{
  const row=document.createElement("div");
  row.className="input-row";
  const btn=document.createElement("div");
  btn.className="status checked";
  btn.textContent="âœ…";
  const label=document.createElement("span");
  label.textContent=item;
  btn.onclick=()=>toggleCheck(btn);
  row.appendChild(btn);
  row.appendChild(label);
  container.appendChild(row);
});

function toggleGoodBad(btn){
  if(btn.classList.contains("checked")){
    btn.classList.remove("checked");
    btn.classList.add("unchecked");
    btn.textContent="âŒ";
  }else{
    btn.classList.remove("unchecked");
    btn.classList.add("checked");
    btn.textContent="âœ…";
  }
}
function toggleCheck(btn){
  if(btn.textContent==="âœ…"){btn.textContent="âŒ";btn.classList.remove("checked");btn.classList.add("unchecked");}
  else{btn.textContent="âœ…";btn.classList.remove("unchecked");btn.classList.add("checked");}
}

function preview(){
  const date=new Date(document.getElementById("date").value);
  const formattedDate=isNaN(date)?"":date.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(",","");
  const deviationLines=document.getElementById("deviation").value.split("\n").filter(l=>l.trim()!=="").map(l=>"âš ï¸ "+l.trim()).join("\n");
  const getSection=(title,selector)=>`${title}\n${[...document.querySelectorAll(selector)].map(r=>{
    const btn=r.querySelector(".status");const label=r.querySelector("span");
    return `${label.textContent} : ${btn.textContent}`;
  }).join("\n")}\n`;

  const validText=[...container.querySelectorAll(".input-row")].map(r=>{
    const btn=r.querySelector(".status");const label=r.querySelector("span");
    return `${label.textContent} ${btn.textContent}`;
  }).join("\n");

  const result=
`ğŸ“‹ Inspection Type : ${document.getElementById("inspectionType").value}

ğŸ“… Tgl : ${formattedDate}
ğŸ‘· Mekanik : ${document.getElementById("mechanic").value}
ğŸš— CN : ${document.getElementById("cn").value}
âŒ› HM : ${document.getElementById("hm").value}


---

ğŸ©¸ Oil Level ğŸ©¸
${getSection("",".card:nth-of-type(2) .input-row")}

---

âš™ï¸ Engine Area âš™ï¸
${getSection("",".card:nth-of-type(3) .input-row")}

---

ğŸš— Cabin Area ğŸš—
${getSection("",".card:nth-of-type(4) .input-row")}

---

ğŸ› Frame Area ğŸ›
${getSection("",".card:nth-of-type(5) .input-row")}

---

ğŸ’§ Pressure Suspension (Panel) ğŸ’§
FL : ${fl.value} | FR : ${fr.value} | RL : ${rl.value} | RR : ${rr.value}


---

ğŸ› ï¸ Tyre Condition ğŸ› ï¸
Tyre : ${tyre.value}
${tyreNote.value?tyreNote.value:"Jika BAD â†’ tulis temuan di bawah ini:"}


---

ğŸ“ Validasi & Kelengkapan Checklist Service
${validText}


---

âš ï¸ Deviation :
${deviationLines}`;

  document.getElementById("preview").textContent=result;
}

function copyText(){
  navigator.clipboard.writeText(document.getElementById("preview").textContent);
  alert("âœ… Format WA telah disalin!");
}

function sendWA(){
  const msg=encodeURIComponent(document.getElementById("preview").textContent);
  window.open(`https://wa.me/?text=${msg}`);
}
</script>
</body>
</html>
